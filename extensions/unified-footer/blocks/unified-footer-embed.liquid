{%- comment -%}
  Unified Footer - App Embed Block
  This footer is shared between the Shopify theme and the Aura platform.
  Menu content is pulled from Shopify Navigation linklists.

  Menus used:
  - quick-links
  - shop
  - help
  - legal
{%- endcomment -%}

{%- liquid
  assign footer_quick_links = linklists['quick-links']
  assign footer_shop = linklists['shop']
  assign footer_help = linklists['help']
  assign footer_legal = linklists['legal']
  assign show_newsletter = block.settings.show_newsletter
  assign newsletter_title = block.settings.newsletter_title
  assign newsletter_subtitle = block.settings.newsletter_subtitle
  assign brand_description = block.settings.brand_description
  assign replace_theme_footer = block.settings.replace_theme_footer
-%}

{%- if replace_theme_footer -%}
<style>
  /* Hide the theme's native footer when this embed is enabled */
  footer.footer,
  .footer,
  footer[role="contentinfo"],
  .site-footer,
  #shopify-section-footer,
  #shopify-section-sections--footer,
  #shopify-section-primal-footer,
  [id^="shopify-section"][id$="primal-footer"] {
    display: none !important;
  }
</style>
{%- endif -%}

{{ 'unified-footer.css' | asset_url | stylesheet_tag }}

<footer class="primal-footer" id="unified-footer" data-source="shopify-embed">
  <div class="primal-footer__wrapper">
    {%- if show_newsletter -%}
    <!-- Newsletter Section -->
    <div class="primal-footer__newsletter">
      <h3 class="primal-footer__newsletter-title">
        {{ newsletter_title }}
      </h3>
      <p class="primal-footer__newsletter-subtitle">
        {{ newsletter_subtitle }}
      </p>
      <form class="primal-footer__newsletter-form" action="/contact" method="post" accept-charset="UTF-8">
        <input type="hidden" name="form_type" value="customer">
        <input type="hidden" name="utf8" value="&#10003;">
        <input
          type="email"
          name="contact[email]"
          class="primal-footer__newsletter-input"
          placeholder="Enter your email"
          required
          autocomplete="email"
        >
        <button type="submit" class="primal-footer__newsletter-button">
          Subscribe
        </button>
      </form>
    </div>
    {%- endif -%}

    <!-- Main Footer Content -->
    <div class="primal-footer__content">
      <!-- Brand Column -->
      <div class="primal-footer__brand">
        <div class="primal-footer__logo">
          <img src="{{ 'primal-500-logo-white.svg' | asset_url }}" alt="Primal 500 Logo" class="primal-footer__logo-icon" width="47" height="40">
          <span class="primal-footer__logo-text">Primal 500</span>
        </div>
        <p class="primal-footer__brand-description">
          {{ brand_description }}
        </p>
        <div class="primal-footer__social">
          <a href="{{ shop.social_links.facebook | default: 'https://facebook.com' }}" class="primal-footer__social-link" target="_blank" rel="noopener noreferrer" aria-label="Follow us on Facebook">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path d="M20 10.061C20 4.505 15.523 0 10 0S0 4.505 0 10.061c0 5.022 3.657 9.184 8.438 9.939v-7.03h-2.54v-2.91h2.54V7.845c0-2.522 1.492-3.915 3.777-3.915 1.094 0 2.238.197 2.238.197v2.476h-1.26c-1.243 0-1.63.775-1.63 1.57v1.888h2.773l-.443 2.908h-2.33V20c4.78-.755 8.437-4.917 8.437-9.939z"/>
            </svg>
          </a>
          <a href="{{ shop.social_links.instagram | default: 'https://instagram.com' }}" class="primal-footer__social-link" target="_blank" rel="noopener noreferrer" aria-label="Follow us on Instagram">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path d="M10 1.802c2.67 0 2.987.01 4.042.058 1.137.052 2.204.248 2.958 1.002.754.754.95 1.82 1.002 2.958.048 1.055.058 1.372.058 4.042s-.01 2.987-.058 4.042c-.052 1.137-.248 2.204-1.002 2.958-.754.754-1.82.95-2.958 1.002-1.055.048-1.372.058-4.042.058s-2.987-.01-4.042-.058c-1.137-.052-2.204-.248-2.958-1.002C2.248 16.058 2.052 14.99 2 13.853c-.048-1.055-.058-1.372-.058-4.042s.01-2.987.058-4.042c.052-1.137.248-2.204 1.002-2.958C3.756 2.057 4.822 1.86 5.96 1.81c1.055-.048 1.372-.058 4.042-.058zM10 0C7.284 0 6.944.012 5.878.06 4.328.126 3.002.522 2.093 1.431 1.184 2.34.788 3.666.722 5.216.674 6.282.662 6.622.662 10s.012 3.718.06 4.784c.066 1.55.462 2.876 1.371 3.785.909.909 2.235 1.305 3.785 1.371 1.066.048 1.406.06 4.784.06s3.718-.012 4.784-.06c1.55-.066 2.876-.462 3.785-1.371.909-.909 1.305-2.235 1.371-3.785.048-1.066.06-1.406.06-4.784s-.012-3.718-.06-4.784c-.066-1.55-.462-2.876-1.371-3.785C17.232 1.522 15.906 1.126 14.356 1.06 13.29.012 12.95 0 10 0zm0 4.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.468a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zm5.339-9.87a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z"/>
            </svg>
          </a>
          <a href="{{ shop.social_links.twitter | default: 'https://x.com' }}" class="primal-footer__social-link" target="_blank" rel="noopener noreferrer" aria-label="Follow us on X">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path d="M15.969 3.058c-.586.26-1.217.436-1.878.515a3.283 3.283 0 001.44-1.813 6.57 6.57 0 01-2.085.797A3.286 3.286 0 007.875 5.03a3.325 3.325 0 00-.067.748A9.324 9.324 0 011.64 2.348a3.282 3.282 0 001.015 4.385A3.263 3.263 0 011.16 6.322v.041a3.285 3.285 0 002.634 3.219 3.287 3.287 0 01-1.482.056 3.286 3.286 0 003.067 2.28A6.587 6.587 0 011 13.278a9.29 9.29 0 005.032 1.472c6.038 0 9.34-5 9.34-9.34 0-.142-.003-.284-.01-.424a6.692 6.692 0 001.638-1.7 6.56 6.56 0 01-1.881.516z"/>
            </svg>
          </a>
          <a href="{{ shop.social_links.linkedin | default: 'https://linkedin.com' }}" class="primal-footer__social-link" target="_blank" rel="noopener noreferrer" aria-label="Follow us on LinkedIn">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path d="M18.52 0H1.477C.66 0 0 .645 0 1.441v17.118C0 19.355.66 20 1.477 20h17.043c.817 0 1.48-.645 1.48-1.441V1.441C20 .645 19.337 0 18.52 0zM5.932 17.043H2.966V7.496h2.966v9.547zM4.449 6.195a1.72 1.72 0 110-3.44 1.72 1.72 0 010 3.44zm13.594 10.848h-2.965v-4.64c0-1.106-.02-2.53-1.541-2.53-1.544 0-1.78 1.206-1.78 2.45v4.72H8.792V7.496h2.845v1.305h.04c.396-.75 1.364-1.54 2.807-1.54 3.003 0 3.559 1.977 3.559 4.547v5.235z"/>
            </svg>
          </a>
        </div>
      </div>

      <!-- Quick Links -->
      <div class="primal-footer__column">
        <h4 class="primal-footer__column-title">
          {%- if footer_quick_links -%}
            {{ footer_quick_links.title | default: 'QUICK LINKS' | upcase }}
          {%- else -%}
            QUICK LINKS
          {%- endif -%}
        </h4>
        <ul class="primal-footer__links">
          {%- if footer_quick_links and footer_quick_links.links.size > 0 -%}
            {%- for link in footer_quick_links.links -%}
              <li class="primal-footer__link-item">
                <a href="{{ link.url }}" class="primal-footer__link">{{ link.title }}</a>
              </li>
            {%- endfor -%}
          {%- else -%}
            <li class="primal-footer__link-item">
              <a href="/pages/about" class="primal-footer__link">About</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/apps/aura/goto?destination=&shop={{ shop.permanent_domain }}&timestamp={{ 'now' | date: '%s' }}000" class="primal-footer__link">Membership</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/collections/all" class="primal-footer__link">Shop</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/pages/contact" class="primal-footer__link">Contact</a>
            </li>
          {%- endif -%}
        </ul>
      </div>

      <!-- Shop -->
      <div class="primal-footer__column">
        <h4 class="primal-footer__column-title">
          {%- if footer_shop -%}
            {{ footer_shop.title | default: 'SHOP' | upcase }}
          {%- else -%}
            SHOP
          {%- endif -%}
        </h4>
        <ul class="primal-footer__links">
          {%- if footer_shop and footer_shop.links.size > 0 -%}
            {%- for link in footer_shop.links -%}
              <li class="primal-footer__link-item">
                <a href="{{ link.url }}" class="primal-footer__link">{{ link.title }}</a>
              </li>
            {%- endfor -%}
          {%- else -%}
            <li class="primal-footer__link-item">
              <a href="/pages/burningwood" class="primal-footer__link">Burningwood</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/pages/private-chefs" class="primal-footer__link">Private Chefs</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/collections/spices" class="primal-footer__link">Spices</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/collections/bbq-sauces" class="primal-footer__link">BBQ Sauces</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/collections/knives" class="primal-footer__link">Knives</a>
            </li>
          {%- endif -%}
        </ul>
      </div>

      <!-- Help -->
      <div class="primal-footer__column">
        <h4 class="primal-footer__column-title">
          {%- if footer_help -%}
            {{ footer_help.title | default: 'HELP' | upcase }}
          {%- else -%}
            HELP
          {%- endif -%}
        </h4>
        <ul class="primal-footer__links">
          {%- if footer_help and footer_help.links.size > 0 -%}
            {%- for link in footer_help.links -%}
              <li class="primal-footer__link-item">
                <a href="{{ link.url }}" class="primal-footer__link">{{ link.title }}</a>
              </li>
            {%- endfor -%}
          {%- else -%}
            <li class="primal-footer__link-item">
              <a href="/pages/faq" class="primal-footer__link">FAQ</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/pages/shipping" class="primal-footer__link">Shipping</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/pages/returns" class="primal-footer__link">Returns</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/pages/support" class="primal-footer__link">Support</a>
            </li>
          {%- endif -%}
        </ul>
      </div>

      <!-- Legal -->
      <div class="primal-footer__column">
        <h4 class="primal-footer__column-title">
          {%- if footer_legal -%}
            {{ footer_legal.title | default: 'LEGAL' | upcase }}
          {%- else -%}
            LEGAL
          {%- endif -%}
        </h4>
        <ul class="primal-footer__links">
          {%- if footer_legal and footer_legal.links.size > 0 -%}
            {%- for link in footer_legal.links -%}
              <li class="primal-footer__link-item">
                <a href="{{ link.url }}" class="primal-footer__link">{{ link.title }}</a>
              </li>
            {%- endfor -%}
          {%- else -%}
            <li class="primal-footer__link-item">
              <a href="/policies/privacy-policy" class="primal-footer__link">Privacy</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/policies/terms-of-service" class="primal-footer__link">Terms</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/policies/refund-policy" class="primal-footer__link">Refunds</a>
            </li>
            <li class="primal-footer__link-item">
              <a href="/pages/cookies" class="primal-footer__link">Cookies</a>
            </li>
          {%- endif -%}
        </ul>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="primal-footer__bottom">
      <div class="primal-footer__copyright">
        &copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. All rights reserved.
      </div>
      <div class="primal-footer__bottom-links">
        <a href="/policies/privacy-policy" class="primal-footer__bottom-link">Privacy Policy</a>
        <a href="/policies/terms-of-service" class="primal-footer__bottom-link">Terms & Conditions</a>
      </div>
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Unified Footer",
  "target": "body",
  "javascript": "unified-footer.js",
  "stylesheet": "unified-footer.css",
  "settings": [
    {
      "type": "checkbox",
      "id": "replace_theme_footer",
      "label": "Replace theme footer",
      "default": true,
      "info": "When enabled, the theme's native footer will be hidden"
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "checkbox",
      "id": "show_newsletter",
      "label": "Show newsletter section",
      "default": true
    },
    {
      "type": "text",
      "id": "newsletter_title",
      "label": "Newsletter title",
      "default": "GET NOTIFIED"
    },
    {
      "type": "textarea",
      "id": "newsletter_subtitle",
      "label": "Newsletter subtitle",
      "default": "Join the waitlist and be the first to know when spots open"
    },
    {
      "type": "header",
      "content": "Brand"
    },
    {
      "type": "textarea",
      "id": "brand_description",
      "label": "Brand description",
      "default": "An exclusive membership club for 500 families who value exceptional quality, ethical sourcing, and uncompromising standards in premium grass-fed proteins."
    }
  ]
}
{% endschema %}
